@page "/settings"

@using TimeTracker.BE.Web.BusinessLogic.Models.DTOs
@using TimeTracker.Web.Blazor.Server.Components.Elements
@using TimeTracker.Web.Blazor.Server.Modals
@using TimeTracker.Web.Blazor.Server.Models

@inherits BasePage

<style>
    .container {
        display: flex;
        justify-content: space-between;
    }

    .column {
        width: 48%; /* Nastaví šířku sloupců na 48%, aby zůstalo trochu místa mezi nimi */
    }
</style>

<h3>Settings</h3>

<div class="container">
    <div id="project" class="column">
        <h4>Projects</h4>
        <div id="menuButtonsProject">
            <MButton OnClick="showModalAddProject">Add</MButton>
            <MButton OnClick="showModalEditProject" IsDisabled="@(_selectedProject==null)">Edit</MButton>
            <MButton OnClick="showModalDeleteProject" IsDisabled="@(_selectedProject==null)">Delete</MButton>
        </div>
        <div>
            <MTable TRow="ProjectBaseDto" Rows="_projects" Columns="_projectColumns" OnRowSelected="onProjectRowSelected" @bind-Selected="_selectedProject" />
        </div>
    </div>
    <div id="submodule" class="column">
        <h4>SubModules</h4>
        <div id="submoduleButtonsProject">
            <MButton OnClick="showModalAddSubmodule" IsDisabled="@(_selectedProject==null)">Add</MButton>
            <MButton OnClick="showModalEditSubmodule" IsDisabled="@(_selectedSubModule==null)">Edit</MButton>
            <MButton OnClick="showModalDeleteSubmodule" IsDisabled="@(_selectedSubModule==null)">Delete</MButton>
        </div>
        <div>
            <MTable TRow="SubModuleBaseDto" Rows="_subModules" Columns="_subModuleColumns" OnRowSelected="onSubModuleRowSelected" />
        </div>
    </div>
</div>

<AddOrEditProjectModal Title="Add project"
                       Project="_selectedProject"
                       @bind-Visible="IsOpenAddOrEdtiProjectModal"
                       OnModalClosed="onAfterCloseModalAddOrEditProjectChanged" />

<AddOrEditSubModuletModal Title="Add submodule"
                          SubModule="_selectedSubModule"
                          @bind-Visible="IsOpenAddOrEditSubModuleModal"
                          OnModalClosed="onAfterCloseModalAddOrEditSubModuleChanged" />

<QueryYesNoModal Title="Query"
                 QueryText="Chcete smazat projekt?"
                 ResultQueryChanged="processingDeleteProjectResult"
                 @bind-Visible="IsOpenProductDeleteQueryModal" />

<QueryYesNoModal Title="Query"
                 QueryText="Chcete smazat subModule?"
                 ResultQueryChanged="processingDeleteSubModuleResult"
                 @bind-Visible="IsOpenSubModuleDeleteQueryModal" />


